<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>车辆订单</title>
    <!--<link rel="stylesheet" href="css/jquery-ui.min.css">-->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>

<div class="wraper">

    <div class="header">
        <ul class="ful tabs" id="tabs">
            <li data-t="all"><a class="btn_2 btn_blue2" href="javascript:;">全部订单</a><!--<span class="tabpop"><i></i><span>12</span><em></em></span>--></li>
            <li data-t="waitPay" data-type2="1"><a class="btn_2border" href="javascript:;">待支付</a><span class="tabpop"><i></i><span></span><em></em></span></li>
            <li data-t="waitAgree"><a class="btn_2border" href="javascript:;">待同意</a><!--<span class="tabpop"><i></i><span>1</span><em></em></span>--></li>
            <li data-t="waitShipment" data-type2="2"><a class="btn_2border" href="javascript:;">待装货</a><span class="tabpop"><i></i><span></span><em></em></span></li>
            <li data-t="yetFinish" data-type2="3"><a class="btn_2border" href="javascript:;">已完成</a><span class="tabpop"><i></i><span></span><em></em></span></li>
            <li data-t="reject" data-type2="4"><a class="btn_2border" href="javascript:;">拒绝/退费</a><span class="tabpop"><i></i><span></span><em></em></span></li>
            <li data-t="catch" data-type2="5"><a class="btn_2border" href="javascript:;">违约/异常</a><span class="tabpop"><i></i><span></span><em></em></span></li>
        </ul>
    </div>

    <div class="main">
        <table width="100%" cellpadding="0" cellspacing="0" border="0" class="tablelist">
            <thead id="list-thead">
            <tr class="thead_all"><th>运单号</th><th>路线</th><th>货物信息</th><th>已付信息费</th><th>货物状态</th><th>操作</th></tr>
            <tr class="thead_waitPay hide"><th>路线</th><th>货物信息</th><th>下单时间</th><th>运前信息费</th><th>货物状态</th><th>操作</th></tr>
            <tr class="thead_waitAgree hide"><th>运单号</th><th>路线</th><th>货物信息</th><th>支付时间</th><th>已付信息费</th><th>货物状态</th><th>操作</th></tr>
            <tr class="thead_waitShipment hide"><th>运单号</th><th>路线</th><th>货物信息</th><th>同意装货时间</th><th>已付信息费</th><th>货物状态</th><th>操作</th></tr>
            <tr class="thead_yetFinish hide"><th>运单号</th><th>路线</th><th>货物信息</th><th>成交时间</th><th>已付信息费</th><th>货物状态</th><th>操作</th></tr>
            <tr class="thead_reject hide"><th>运单号</th><th>路线</th><th>货物信息</th><th>拒绝时间</th><th>已付信息费</th><th>货物状态</th><th>操作</th></tr>
            <tr class="thead_catch hide"><th>运单号</th><th>路线</th><th>货物信息</th><th>上报时间</th><th>已付信息费</th><th>异常类型</th><th>上报人</th><th>货物状态</th><th>操作</th></tr>
            </thead>
            <tbody id="list-tbody"></tbody>
        </table>
        <div class="listLoadMore" id="listLoadMore"><span>没有更多了</span><a href="javascript:;" id="linkBtn_loadMore">加载更多></a></div>
    </div>

</div>

<div class="overlay" id="overlay"></div>
<div class="dialogs" id="dialogs">
    <img class="dg_close" id="dg_close" src="img/s_005.png" alt="">
    <div id="dialog_m"><p class="pd_load">Loading..</p></div>
</div>
<div class="overlay2" id="overlay2"></div>
<div class="detail_w" id="detail_w"><p class="pd_load">Loading..</p></div>
<div class="loading" id="loading"><img src="img/loading.gif" alt="loading"></div>
<div id="toast" class="toast"><div class="toast_m"><span></span></div></div>

<script id="tr_tmp_all" type="text/html">
    <%for(var i=0,l=list.length;i<l;i++){
        var msgFee = '';
        if(list[i].payAmount) msgFee = parseInt(list[i].payAmount/100,10) + '元';
        var status_c = tabLocal2ServerMap_allBook[list[i].robStatus]||'';
        var status = tabLocalMap[status_c]||'';
        var class1 = app.ui.getColor(status);
        var btns = '';
        if(status_c==='waitPay') btns = '<a class="'+app.ui.getColor('继续支付')+'" href="javascript:;">继续支付</a>';
        else if(status_c==='waitAgree') btns = '<a class="btn_index_detail '+app.ui.getColor('详情')+'" href="javascript:;">详 情</a>';
        else if(status_c==='waitShipment') btns = '<a class="'+app.ui.getColor('异常上报')+'" href="javascript:;">异常上报</a> <a class="'+app.ui.getColor('装货完成')+'" href="javascript:;">装货完成</a>';
        else if(status_c==='yetFinish') btns = '<a class="btn_index_detail '+app.ui.getColor('详情')+'" href="javascript:;">详情</a>';
        else if(status_c==='reject') btns = '<a class="btn_index_detail '+app.ui.getColor('详情')+'" href="javascript:;">详情</a>';
        else if(status_c==='catch') btns = '<a class="btn_index_detail '+app.ui.getColor('详情')+'" href="javascript:;">详情</a>';
    %>
        <tr data-id="<%=list[i].id%>">
            <td><%=(list[i].tsOrderNo||'')%></td>
            <td><%=(list[i].startPoint||'')%> ⇀ <%=(list[i].startPoint||'')%></td>
            <td><%=(list[i].taskContent||'')%></td>
            <td><%=msgFee%></td>
            <td><span class="<%=class1%>"><%=status%></span></td>
            <td><%-btns%></td>
        </tr>
    <%}%>
</script>
<script id="tr_tmp_waitPay" type="text/html">
    <%for(var i=0,l=list.length;i<l;i++){
        var msgFee = '';
        if(list[i].payAmount) msgFee = parseInt(list[i].payAmount/100,10) + '元';
        var class1 = app.ui.getColor('待支付');
        var class2 = app.ui.getColor('继续支付');
    %>
        <tr data-id="<%=list[i].id%>">
            <td><%=(list[i].startPoint||'')%> ⇀ <%=(list[i].startPoint||'')%></td>
            <td><%=(list[i].taskContent||'')%></td>
            <td><%=app.util.dateFormat(list[i].createTime,'HH:mm:ss')%></td>
            <td><%=msgFee%></td>
            <td><span class="<%=class1%>">待支付</span></td>
            <td><a class="<%=class2%>" href="javascript:;">继续支付</a></td>
        </tr>
    <%}%>
</script>
<script id="tr_tmp_waitAgree" type="text/html">
    <%for(var i=0,l=list.length;i<l;i++){
        var msgFee = '';
        if(list[i].payAmount) msgFee = parseInt(list[i].payAmount/100,10) + '元';
        var class1 = app.ui.getColor('待同意');
        var class2 = app.ui.getColor('详情');
    %>
        <tr data-id="<%=list[i].id%>">
            <td><%=(list[i].tsOrderNo||'')%></td>
            <td><%=(list[i].startPoint||'')%> ⇀ <%=(list[i].startPoint||'')%></td>
            <td><%=(list[i].taskContent||'')%></td>
            <td><%=app.util.dateFormat(list[i].payEndTime,'HH:mm:ss')%></td>
            <td><%=msgFee%></td>
            <td><span class="<%=class1%>">待同意</span></td>
            <td><a class="btn_index_detail <%=class2%>" href="javascript:;">详 情</a></td>
        </tr>
    <%}%>
</script>
<script id="tr_tmp_waitShipment" type="text/html">
    <%for(var i=0,l=list.length;i<l;i++){
        var msgFee = '';
        if(list[i].payAmount) msgFee = parseInt(list[i].payAmount/100,10) + '元';
        var class1 = app.ui.getColor('待装货');
        var class2 = app.ui.getColor('异常上报');
        var class3 = app.ui.getColor('装货完成');
    %>
        <tr data-id="<%=list[i].id%>">
            <td><%=(list[i].tsOrderNo||'')%></td>
            <td><%=(list[i].startPoint||'')%> ⇀ <%=(list[i].startPoint||'')%></td>
            <td><%=(list[i].taskContent||'')%></td>
            <td><%=app.util.dateFormat(list[i].agreeTime,'HH:mm:ss')%></td>
            <td><%=msgFee%></td>
            <td><span class="<%=class1%>">待装货</span></td>
            <td><a href="javascript:;" class="<%=class2%>">异常上报</a> <a href="javascript:;" class="<%=class3%>">装货完成</a></td>
        </tr>
    <%}%>
</script>
<script id="tr_tmp_yetFinish" type="text/html">
    <%for(var i=0,l=list.length;i<l;i++){
        var msgFee = '';
        if(list[i].payAmount) msgFee = parseInt(list[i].payAmount/100,10) + '元';
        var class1 = app.ui.getColor('已完成');
        var class2 = app.ui.getColor('详情');
    %>
        <tr data-id="<%=list[i].id%>">
            <td><%=(list[i].tsOrderNo||'')%></td>
            <td><%=(list[i].startPoint||'')%> ⇀ <%=(list[i].startPoint||'')%></td>
            <td><%=(list[i].taskContent||'')%></td>
            <td><%=app.util.dateFormat(list[i].loadTime,'HH:mm:ss')%></td>
            <td><%=msgFee%></td>
            <td><span class="<%=class1%>">已完成</span></td>
            <td><a href="javascript:;" class="btn_index_detail <%=class2%>">详 情</a></td>
        </tr>
    <%}%>
</script>
<script id="tr_tmp_reject" type="text/html">
    <%for(var i=0,l=list.length;i<l;i++){
        var msgFee = '';
        if(list[i].payAmount) msgFee = parseInt(list[i].payAmount/100,10) + '元';
        var class1 = app.ui.getColor('拒绝');
        var class2 = app.ui.getColor('详情');
    %>
        <tr data-id="<%=list[i].id%>">
            <td><%=(list[i].tsOrderNo||'')%></td>
            <td><%=(list[i].startPoint||'')%> ⇀ <%=(list[i].startPoint||'')%></td>
            <td><%=(list[i].taskContent||'')%></td>
            <td><%=app.util.dateFormat(list[i].refuseTime,'HH:mm:ss')%></td>
            <td><%=msgFee%></td>
            <td><span class="<%=class1%>">拒绝</span></td>
            <td><a href="javascript:;" class="btn_index_detail <%=class2%>">详 情</a></td>
        </tr>
    <%}%>
</script>
<script id="tr_tmp_catch" type="text/html">
    <%for(var i=0,l=list.length;i<l;i++){
        var msgFee = '';
        if(list[i].payAmount) msgFee = parseInt(list[i].payAmount/100,10) + '元';

        var exParty = list[i].exParty, s = catchType[exParty]||{} ,catchTypes = s[list[i].exType]||'';
        var reportPerson = '';
        if(list[i].exParty==1) reportPerson= '车方';
        else if(list[i].exParty==2) reportPerson= '货主';
        var manageStatus = ''; //0初始化1处理中2处理完成
        if(list[i].exStatus==0) manageStatus= '待处理';
        else if(list[i].exStatus==1) manageStatus= '处理中';
        else if(list[i].exStatus==2) manageStatus= '处理完成';
        var class1 = app.ui.getColor(manageStatus);
        var class2 = app.ui.getColor('详情');
    %>
        <tr data-id="<%=list[i].id%>">
            <td><%=(list[i].tsOrderNo||'')%></td>
            <td><%=(list[i].startPoint||'')%> ⇀ <%=(list[i].startPoint||'')%></td>
            <td><%=(list[i].taskContent||'')%></td>
            <td><%=app.util.dateFormat(list[i].exTime,'HH:mm:ss')%></td>
            <td><%=msgFee%></td>
            <td><%=catchTypes%></td>
            <td><%=reportPerson%></td>
            <td><span class="<%=class1%>"><%=manageStatus%></span></td>
            <td><a href="javascript:;" class="btn_index_detail <%=class2%>">详 情</a></td>
        </tr>
    <%}%>
</script>

<script src="js/jquery1.12.4.min.js"></script>
<script src="js/baiduTemplate.js"></script>
<!--<script src="js/jquery-ui.min.js"></script>-->
<script src="js/app.js"></script>
<script src="js/index.js"></script>
</body>
</html>